<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from cs241.cs.illinois.edu/assignments/finding_filesystems.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 17 Dec 2019 18:32:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8">

  <!-- If for some reason you are using IE, use edge -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- So bootstrap isn't horrible, set the width -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="icon" type="image/png" href="../images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="../images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="../images/favicons/manifest.json">
  <link rel="mask-icon" href="../images/favicons/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="theme-color" content="#ffffff">

  <title>CS 241 · Finding Filesystems</title>

  <!-- Reference a CDN so this is properly cached in the browser forever. Unless they clean out the
       Cache this will incur no load time. Ideally we should put a security checksum but that breaks
       Firefox development sometimes -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" crossorigin="anonymous">

  <!-- Asynchronously load the code style sheet because we want everything loaded as fast as possible
       Also tag with ?v=time to bust the cache of any browser so updates appear -->
  <style rel="stylesheet" type="text/css">.highlight table td{padding:5px}.highlight table pre{margin:0}.highlight,.highlight .w{color:#93a1a1;background-color:#002b36}.highlight .err{color:#002b36;background-color:#dc322f}.highlight .c,.highlight .cd,.highlight .cm,.highlight .c1,.highlight .cs{color:#657b83}.highlight .cp{color:#b58900}.highlight .nt{color:#b58900}.highlight .o,.highlight .ow{color:#93a1a1}.highlight .p,.highlight .pi{color:#93a1a1}.highlight .gi{color:#859900}.highlight .gd{color:#dc322f}.highlight .gh{color:#268bd2;background-color:#002b36;font-weight:bold}.highlight .k,.highlight .kn,.highlight .kp,.highlight .kr,.highlight .kv{color:#6c71c4}.highlight .kc{color:#cb4b16}.highlight .kt{color:#cb4b16}.highlight .kd{color:#cb4b16}.highlight .s,.highlight .sb,.highlight .sc,.highlight .sd,.highlight .s2,.highlight .sh,.highlight .sx,.highlight .s1{color:#859900}.highlight .sr{color:#2aa198}.highlight .si{color:#d33682}.highlight .se{color:#d33682}.highlight .nn{color:#b58900}.highlight .nc{color:#b58900}.highlight .no{color:#b58900}.highlight .na{color:#268bd2}.highlight .m,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .il,.highlight .mo,.highlight .mb,.highlight .mx{color:#859900}.highlight .ss{color:#859900}
/*# sourceMappingURL=/assets/source-maps/code-style.css.map */
/*# sourceURL=css/code-style.css */
</style>
  <style rel="stylesheet" type="text/css">:root{--color-primary: hsl(207, 59%, 43%);--color-secondary: hsl(207, 70%, 53%);--color-emphasis: hsl(204, 100%, 42%);--color-text: hsl(0, 0%, 0%);--color-translucent: hsla(0, 0%, 0%, 0.3);--color-pale-white: hsla(240, 8%, 95%)}body{padding-top:50px;font-family:Roboto, Helvetica, Arial, sans-serif;background-color:var(--color-pale-white);color:var(--color-text);padding-bottom:50px}@media (min-width: 768px) and (max-width: 991px){body{padding-top:100px}}.navbar{background-color:var(--color-primary);border-color:var(--color-secondary);border:0px;border-top:none;box-shadow:none;margin-bottom:0}.navbar-default .navbar-brand{color:var(--color-pale-white) !important;font-weight:bold}.navbar-default .navbar-nav>li>a{color:var(--color-pale-white) !important}.navbar-collapse{border-top:0px !important;box-shadow:none}.navbar-brand:hover{color:var(--color-navbar-text) !important}.github-link{display:inline-block;vertical-align:middle;margin-left:0.5em;text-indent:-9999px;width:32px;height:32px;background-image:url(NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgNjQgNjQiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDY0IDY0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjMTgxNjE2IiBkPSJNMzIuNiwzLjRDMTYuMywzLjQsMywxNi43LDMsMzMuMWMwLDEzLjEsOC41LDI0LjIsMjAuMywyOC4xDQoJYzEuNSwwLjMsMi0wLjYsMi0xLjRjMC0wLjcsMC0yLjYsMC01Yy04LjIsMS44LTEwLTQtMTAtNGMtMS4zLTMuNC0zLjMtNC4zLTMuMy00LjNjLTIuNy0xLjgsMC4yLTEuOCwwLjItMS44YzMsMC4yLDQuNSwzLjEsNC41LDMuMQ0KCWMyLjYsNC41LDYuOSwzLjIsOC42LDIuNWMwLjMtMS45LDEtMy4yLDEuOS00Yy02LjYtMC43LTEzLjUtMy4zLTEzLjUtMTQuNmMwLTMuMiwxLjItNS45LDMtNy45Yy0wLjMtMC43LTEuMy0zLjgsMC4zLTcuOA0KCWMwLDAsMi41LTAuOCw4LjEsM2MyLjQtMC43LDQuOS0xLDcuNC0xYzIuNSwwLDUsMC4zLDcuNCwxYzUuNy0zLjgsOC4xLTMsOC4xLTNjMS42LDQuMSwwLjYsNy4xLDAuMyw3LjhjMS45LDIuMSwzLDQuNywzLDcuOQ0KCWMwLDExLjQtNi45LDEzLjktMTMuNSwxNC42YzEuMSwwLjksMiwyLjcsMiw1LjVjMCw0LDAsNy4yLDAsOC4xYzAsMC44LDAuNSwxLjcsMiwxLjRjMTEuOC0zLjksMjAuMi0xNSwyMC4yLTI4LjENCglDNjIuMiwxNi43LDQ5LDMuNCwzMi42LDMuNHoiLz4NCjwvc3ZnPg0K)}h1{padding-bottom:20px;font-size:48px}h2{padding-top:50px;margin-top:-20px}.navbar-nav,.navbar-nav>ul{margin:0}@media (max-width: 767px){h1{font-size:36px}h2{font-size:22px}p,li{font-size:12px}}.popover{background-color:black;color:black;display:block}.popover-title{background-color:black;color:black;font-size:12px;text-align:center;border-bottom:0px}.popover-title a{color:white;cursor:pointer}.popover-content{background-color:black;padding:0px}.popover.top>.arrow:after{border-top-color:black}table{width:100%}.anchor{display:none;padding-left:5px}.title-text:hover>.anchor{display:inline}.day{height:300px;margin-bottom:20px;width:100%;background-color:#fff;border-radius:3px}.day h1{color:#f1f1f3}.day-summary,.day-resources{color:#000}.day-resources{position:absolute;bottom:20px}.day-summary{position:absolute;top:75px}.day-title-text h3{margin:0px}.day-title{padding-top:5px;padding-bottom:5px;border-radius:3px;height:70px}.schedule-container{margin-left:20px;margin-right:20px}ul.toc{list-style:none;padding-left:1em}h1,h2,h3{color:var(--color-secondary)}.announcement-card{background-color:var(--color-pale-white);border-radius:5px}.annoucement-title{margin-top:5px}.day-title-h3{color:var(--color-pale-white)}img:not(.emoji){max-height:80vh;display:inline-block;margin:auto;max-width:100%}.img-paragraph{display:grid}.hidden{display:none !important}.loader,.loader:before,.loader:after{border-radius:50%}.loader{color:var(--color-pale-white);font-size:11px;text-indent:-99999em;margin:55px auto;position:relative;width:10em;height:10em;box-shadow:inset 0 0 0 1em;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0)}.loader:before,.loader:after{position:absolute;content:''}.loader:before{width:5.2em;height:10.2em;background:#0dc5c1;border-radius:10.2em 0 0 10.2em;top:-0.1em;left:-0.1em;-webkit-transform-origin:5.2em 5.1em;transform-origin:5.2em 5.1em;-webkit-animation:load2 2s infinite ease 1.5s;animation:load2 2s infinite ease 1.5s}.loader:after{width:5.2em;height:10.2em;background:#0dc5c1;border-radius:0 10.2em 10.2em 0;top:-0.1em;left:5.1em;-webkit-transform-origin:0px 5.1em;transform-origin:0px 5.1em;-webkit-animation:load2 2s infinite ease;animation:load2 2s infinite ease}@-webkit-keyframes load2{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes load2{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.anchor{text-decoration:none}.anchor:hover{text-decoration:none}.fancy-link{text-decoration:none !important;color:var(--color-emphasis);display:inline-block;position:relative;padding-bottom:0px}.fancy-link:after{content:'';display:block;margin:auto;height:1px;width:0px;background:transparent;transition:width .3s ease, background-color .3s ease}.fancy-link:hover:after{width:100%;background:var(--color-emphasis)}.container-fluid{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.navbar-toggle{border-width:0px}.navbar-default .navbar-toggle .icon-bar{background-color:var(--color-pale-white)}.navbar-brand.small{display:none}@media (max-width: 767px){.navbar-brand.normal{display:none}.navbar-brand.small{display:inline-block}}.speaker-wrapper{float:right}.speaker{background-image:url("data:image/png;base64,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");background-size:cover;height:40px;width:40px;margin-top:5px}pre{color:var(--color-pale-white);background-color:var(--color-text);border:inherit}code{color:var(--color-pale-white)}.code-copy{float:right;right:0px;display:none;background-color:var(--color-text);padding:5px 5px 5px 5px;border-radius:3px;cursor:pointer}pre code{display:block}pre:hover>*>.code-copy{display:inline}.code-copy-textarea{position:absolute;left:-9999px;top:-9999px}pre.highlight{margin-bottom:-10px;padding-bottom:0px}.highlighter-rouge{background-color:#DFDFDF;color:#151515;border-radius:5px;padding-top:4px}.highlight{background-color:#151515;border:0px;color:#F2F2F4}div.highlighter-rouge,figure.highlighter-rouge{background-color:#151515;color:#D7D7D7;padding-bottom:1.5em;margin-bottom:0.65em}.fancy-link code{color:#337ab7}.fancy-link:hover code{color:#23527c}.fancy-link:hover:after code{background-color:#337ab7}.table>tbody>tr>td,table>tbody>tr>td,.table>tbody>tr>th,table>tbody>tr>th,.table>tfoot>tr>td,table>tfoot>tr>td,.table>tfoot>tr>th,table>tfoot>tr>th,.table>thead>tr>td,table>thead>tr>td,.table>thead>tr>th,table>thead>tr>th{border-top:0px}.table,table{margin-left:40px;width:75%}.search-icon-div{width:initial;padding-left:10px;background-color:white;height:34px;border-radius:3px 0px 0px 3px}.glyphicon-search{font-size:32px;top:0px;color:#2C72AD}.search{border-radius:0px 3px 3px 0px;border:0px;outline:none;box-shadow:none}.no-gutter>[class*='col-']{padding-right:0;padding-left:0}.result-link{font-size:24px;text-decoration:underline}.result-div{padding-bottom:12px}.highlight-result{background-color:yellow;border-radius:3px;color:black;padding-left:2px;padding-right:2px}tbody tr:nth-child(odd){background-color:#DDD;border-radius:20px}html.hacker,body.hacker,header.hacker,nav.hacker,:not(.card-staff)>*>div:not(.card-staff).hacker,table.hacker,pre.hacker,span.hacker,:not(.card-staff)>a.hacker,p.hacker,h1.hacker,h2.hacker,h3.hacker,h4.hacker,h5.hacker,h6.hacker{color:white !important;font-family:monospace !important;background-color:black !important}h1.hacker,h2.hacker,h3.hacker,h4.hacker,h5.hacker,h6.hacker{color:#20C20E !important}ul.hacker{list-style-type:square}pre.hacker{border-color:white;border-radius:0}.toc.hacker{border-left-width:0}.content .highlighter-rouge.hacker{font-weight:bold;background-color:black}.pad.hacker{padding:0}a.hacker{color:#20C20E}tbody tr:nth-child(odd).hacker{background-color:inherit}body.hacker .day,body.hacker .announcement-card{background-color:#151515}body.hacker .announcement{color:white !important}#tuxlink img.hacker{-ms-interpolation-mode:nearest-neighbor;image-rendering:pixelated}.apply-button{border:none;background-color:white;padding:10px 20px 10px 20px;font-size:36px;border-radius:5px;box-shadow:5px 5px gray;margin:10px auto 10px auto;display:block;transition:background-color 0.5s ease}.apply-button:hover{background-color:var(--color-primary)}li.navbar-subitem{float:left;overflow:hidden;width:100%}.navbar-item,.navbar-subitem{color:var(--color-navbar-text);text-align:center;font-family:'Roboto', sans-serif}li.navbar-item:hover,li.navbar-subitem:hover{background-color:white}li.navbar-item:hover>a,li.navbar-subitem:hover>a{color:var(--color-primary) !important}.subitem-container{display:none;position:absolute;min-width:8vw;background-color:var(--color-primary);box-shadow:0px 8px 16px 0px var(--color-translucent);z-index:1;width:100%}.navbar-item:hover .subitem-container{display:block}.staff{width:100%}.flexbox-item div.staff-image{width:18vh;height:18vh;overflow:hidden;background-size:cover;padding:0;border-radius:50%}.flexbox-item:hover div.staff-image{box-shadow:0 4px 12px 0 var(--color-translucent),0 6px 20px 0 var(--color-translucent)}.staff-name{bottom:0px;width:100%;text-align:center;font-weight:100;padding-top:2vh;color:var(--color-secondary-emphasis)}.heading{text-align:center;font-family:Roboto, Helvetica, sans-serif;font-size:3em;padding:1em;padding:0}section.center{text-align:center;padding-left:3vw;padding-right:3vw;padding-bottom:0;padding-top:0}main{text-align:center;margin:0;padding:0;background-color:white}.card-body{background-color:var(--color-pale-white);padding:2vh;display:block}.card-body.course-heading{background-color:rgba(72,105,255,0.945)}.card-body.card-body.course-heading h1{color:white}.card-body.course-information{background-color:white}h2{font-weight:200}section.flexbox{display:flex;justify-content:center;margin:auto;flex-wrap:wrap;width:90vw}.flexbox-item{display:inline-block;padding:2vh;margin:2vh}img.logo{width:2vw;height:3vw;margin:2vh}@media (max-width: 480px){.flexbox-item div.staff-image{width:18vh;height:18vh}img.logo{width:10vw;height:8vh}.staff-name{font-size:0.75em}}.infrastructure-links{margin:auto;text-align:center;display:block}.gallery{display:flex;justify-content:center;margin:auto;padding:5vw;flex-wrap:wrap;width:100vw}.staff{width:100%}.staff-container{margin:2vh}.staff-container div.staff-image{width:24vh;height:24vh;overflow:hidden;background-size:cover;padding:0;border-radius:50%}.staff-container:hover div.staff-image{box-shadow:0 4px 12px 0 var(--color-translucent),0 6px 20px 0 var(--color-translucent)}.staff-name{bottom:0px;width:100%;text-align:center;font-size:1.5em;padding-top:1vh;color:var(--color-emphasis)}.heading{text-align:center}section.center{text-align:center;padding-left:3vw;padding-right:3vw;padding-bottom:0;padding-top:0}@media only screen and (max-width: 480px){.staff-container div.staff-image{width:20vh;height:20vh}.staff-name{font-size:1.25em}}.latest-mp{background-color:rgba(16,213,147,0.85)}.latest-lab{background-color:rgba(255,102,42,0.85)}.latest-assignments section.flexbox-item{border-radius:4%}
/*# sourceMappingURL=/assets/source-maps/main.css.map */
/*# sourceURL=css/main.css */
</style>

  <meta property="og:locale" content="en_US">
  
  
  <meta property="og:title" content="Finding Filesystems" />
  
  
  <meta property="og:type" content="article" />
  <meta property="og:url" content="http://cs241.cs.illinois.edu" />
  
  
  <meta property="og:description" content=""Webpage for CS 241: System Programming at the University of Illinois at Urbana-Champaign. All documentation and information about the course can be found here."
" />
  

</head>

<body>
<!-- Always shows a header, even in smaller screens. -->
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <!-- Navigation button as html so we don't have to resize images -->
      <button
        type="button"
        class="navbar-toggle collapsed"
        data-toggle="collapse"
        data-target=".navbar-collapse"
        aria-expanded="false"
        aria-controls="navbar"
      >
        <!-- Hamburger Navigation bar on small -->
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <!-- Full title on laptop -->
      <a class="navbar-brand navbar-item normal" href="../index.html">
             <span>CS 241: System Programming</span> 
      </a>

      <!-- Smaller on mobile-->
      <a class="navbar-brand navbar-item small" href="../index.html">
          <span>CS 241</span>
      </a>
    </div>

    <!-- Finally generate what is in the navbar -->
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
        <li class="navbar-item">
          <a href="../assignments.html">Assignments</a>
          <!-- Generate sublinks-->
          <ul class="nav navbar-nav subitem-container">
            
          </ul>
        </li>
        
        <li class="navbar-item">
          <a href="../quiz_topics.html">Quizzes</a>
          <!-- Generate sublinks-->
          <ul class="nav navbar-nav subitem-container">
            
          </ul>
        </li>
        
        <li class="navbar-item">
          <a href="../grades.html">Grades</a>
          <!-- Generate sublinks-->
          <ul class="nav navbar-nav subitem-container">
            
          </ul>
        </li>
        
        <li class="navbar-item">
          <a href="../schedule.html">Schedule</a>
          <!-- Generate sublinks-->
          <ul class="nav navbar-nav subitem-container">
            
            <li class="navbar-subitem">
              <a href="../lectures.html">Lectures</a>
            </li>
            
          </ul>
        </li>
        
        <li class="navbar-item">
          <a href="../syllabus.html">Syllabus</a>
          <!-- Generate sublinks-->
          <ul class="nav navbar-nav subitem-container">
            
          </ul>
        </li>
        
        <li class="navbar-item">
          <a href="../staff.html">Staff</a>
          <!-- Generate sublinks-->
          <ul class="nav navbar-nav subitem-container">
            
            <li class="navbar-subitem">
              <a href="../staff_hall_of_fame.html">Staff Hall of Fame</a>
            </li>
            
          </ul>
        </li>
        
        <li class="navbar-item">
          <a href="../resources.html">Resources</a>
          <!-- Generate sublinks-->
          <ul class="nav navbar-nav subitem-container">
            
            <li class="navbar-subitem">
              <a href="../peer_tutoring.html">Peer Tutoring</a>
            </li>
            
            <li class="navbar-subitem">
              <a href="../coursebook/index.html">Coursebook</a>
            </li>
            
          </ul>
        </li>
        
        <li class="navbar-item">
          <a href="../honors.html">Honors</a>
          <!-- Generate sublinks-->
          <ul class="nav navbar-nav subitem-container">
            
          </ul>
        </li>
        
      </ul>
    </div>
  </div>
  <!-- Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Roboto"
    rel="stylesheet"
  />
</nav>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-2 col-sm-1 col-xs-0"></div>
    <div class="col-md-8 col-sm-10 col-xs-12">
      <div class="wrapper">
        <div class="pad"><div class="card">
          <div class="title">
            
            
            
            <h1>
              Finding Filesystems

              
                <a class="github-link hidden-xs" href="https://github.com/illinois-cs241/assignment-docs/blob/master//finding_filesystems.md">Edit on Github</a>
              
            </h1>
          </div>
          <div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
            
              <div class="submission-wrapper">
                
                  <b>Entire Assignment</b> due <b>2019-11-11 23:59</b><br/>
                  
                    <b>Graded files:</b>
                    <ul>
                      
                        <li>minixfs.c</li>
                      
                    </ul>
                  
                
              </div>
            
            
          </div></div></div>
        </div></div>
      </div>
      
      <div class="toc-wrapper">
<h4>Content</h4>
<ul class="toc">
<li><a id="toc_introduction--backstory" href="#introduction--backstory" class="fancy-link">Introduction / Backstory</a></li>
<li><a id="toc_minixfs" href="#minixfs" class="fancy-link">minixfs</a></li>
<li><a id="toc_fakefs-interface" href="#fakefs-interface" class="fancy-link">fakefs interface</a></li>
<li><a id="toc_helper-functionsmacros" href="#helper-functionsmacros" class="fancy-link">Helper Functions/Macros</a></li>
<li><a id="toc_so-what-do-i-need-to-do" href="#so-what-do-i-need-to-do" class="fancy-link">So what do I need to do?</a></li>
<li><a id="toc_some-notes-on-minixfs_create_inode_for_path" href="#some-notes-on-minixfs_create_inode_for_path" class="fancy-link">Some notes on <code class="highlighter-rouge">minixfs_create_inode_for_path</code></a></li>
<li><a id="toc_virtual-filesystem" href="#virtual-filesystem" class="fancy-link">Virtual Filesystem</a></li>
<li><a id="toc_testing" href="#testing" class="fancy-link">Testing</a></li>
<li><a id="toc_other-edge-cases" href="#other-edge-cases" class="fancy-link">Other Edge Cases</a></li>
<li><a id="toc_helpful-hints-and-notes" href="#helpful-hints-and-notes" class="fancy-link">Helpful Hints and Notes</a></li>
</ul>
</div>
      
      <div id="content">
          <div class="wrapper">
  <div class="pad"><div class="card">
<div class="title"><h2 id="learning-objectives" class="title-text">Learning Objectives<a class="anchor title-text" href="#learning-objectives">#</a>
</h2></div>
  
  


<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p>
    The learning objectives for Finding Filesystems are: <br>
    </p>
<ul class="mdl-list">
      
        <li class="mdl-list__item">
          <span class="mdl-list__item-primary-content">Learn how inodes are represented in the kernel</span>
        </li>
      
        <li class="mdl-list__item">
          <span class="mdl-list__item-primary-content">How to write callbacks for filesystem operations</span>
        </li>
      
        <li class="mdl-list__item">
          <span class="mdl-list__item-primary-content">Traverse singly indirect blocks</span>
        </li>
      
        <li class="mdl-list__item">
          <span class="mdl-list__item-primary-content">Modifying permissions on files</span>
        </li>
      
    </ul>
</div></div></div>
</div></div>
</div>
          <div class="wrapper">
<div class="pad"><div class="card">
<div class="title"><h2 id="introduction--backstory" class="title-text">Introduction / Backstory<a class="anchor title-text" href="#introduction--backstory">#</a>
</h2></div>











<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p>So you’ve been doing well at Macrohard. Your turbo malloc really impressed your boss and you also went on to work on the infamous password cracker and parmake programs. However, your bosses have been looking for a way to store data in a proprietary format so that they can easily share chunks of data without having to first compress it. They have the following requirements:</p>
<ul>
  <li>The data must be stored in a single file so that it’s easy to share - however, to keep the file within the company the format must be proprietary</li>
  <li>Current tools like <code class="highlighter-rouge"><a href="https://linux.die.net/man/1/cp" class="fancy-link">cp</a></code>, <code class="highlighter-rouge"><a href="https://linux.die.net/man/1/ls" class="fancy-link">ls</a></code>, <code class="highlighter-rouge"><a href="https://linux.die.net/man/1/touch" class="fancy-link">touch</a></code>, etc must work with this data format for easy usage</li>
</ul>
<p>Sounds tough. That second requirement really throws a spin on things. It’s such an arbitrary requirement. Almost as if it was just thrown in as a TA’s lazy writing to motivate an MP or something. Lame!</p>
<p>Of course, as a student of CS241, you know exactly what they’re asking for - a loopback filesystem! After doing some research, you decide that a good filesystem to base your implementation off of is minixfs. Your friendly coworkers have already made some progress on this project and created a filesystem wrapper, fakefs, That can load a mininxfs image. It’s now your job to implement a few filesystem operation for minix.</p>
<p>In this MP, you will be implementing several callbacks to file system operations, namely, <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/chmod" class="fancy-link">chmod</a></code>, <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/chown" class="fancy-link">chown</a></code>, <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/read" class="fancy-link">read</a></code>, and <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/write" class="fancy-link">write</a></code>. To do this you will be exploring how metadata is stored in the inode and how data is stored in the data blocks. You will also be exploring the idea of virtual filesystems and how they can be used to present metadata about a system.</p>
</div></div></div>
</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="minixfs" class="title-text">minixfs<a class="anchor title-text" href="#minixfs">#</a>
</h2></div>



































<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p>ext2 is good filesystem, but to keep things simple, we will be using a modified version of its predecessor (the <a href="https://en.wikipedia.org/wiki/MINIX_file_system" class="fancy-link wiki-link">MINIX filesystem</a>) in this MP.</p>
<h3 id="superblock" class="title-text">Superblock</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
typedef struct {
	uint64_t size;
	uint64_t inode_count;
	uint64_t dblock_count;
	char data_map[0];
} superblock;

</code></pre></div></div>
<p>The superblock stores information like the size of the filesystem, the number of inodes and data blocks, and whether those data blocks are being used. Remember from class that inodes become free when their hard link count reaches zero, but data blocks need some kind of bitmap or sentinel to indicate if they are being used. <code class="highlighter-rouge">data_map</code> is a variable-sized array that holds this information. <strong>You don’t need to worry about these abstractions, they are taken care of for you</strong>.</p>
<h3 id="inodes" class="title-text">Inodes</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>typedef struct {
  uid_t uid; 
  gid_t gid; 
  uint16_t mode; 
  uint32_t nlink; 
  struct timespec atim;
  struct timespec mtim;
  struct timespec ctim;
  uint64_t size; 
  data_block_number direct[NUM_DIRECT_BLOCKS];
  data_block_number indirect;
} inode;
</code></pre></div></div>
<p>This is the famous inode struct that you have been learning about! Here are a breakdown of the variables:</p>
<ul>
  <li>
<code class="highlighter-rouge"><a href="https://linux.die.net/man/3/uid" class="fancy-link">uid</a></code> is the user ID of the inode owner.</li>
  <li>
<code class="highlighter-rouge">gid</code> is the ID of the inode group (does not have to include the owner).</li>
  <li>
<code class="highlighter-rouge">mode</code> is a bitmask. The bottom 9 bits are read-write-execute for owner-group-others. Bits 11-10 are the type of the file. <code class="highlighter-rouge">(mode &gt;&gt; 9)</code> corresponds to a particular type. We have given you two functions, <code class="highlighter-rouge">is_file</code> and <code class="highlighter-rouge">is_directory</code>, that tell you whether or not the inode represents a directory or file. There are no other types in our filesystem.</li>
  <li>
<code class="highlighter-rouge">nlink</code> is the hard link count which is the number of directories that the file is linked to from (directories can’t be hard linked).</li>
  <li>
<code class="highlighter-rouge">atim</code> is access time, which is the time of last access or the last time a file was <code class="highlighter-rouge">read(2)</code>.</li>
  <li>
<code class="highlighter-rouge">mtim</code> is the last modification time, or in other words, the last time the file was changed with <code class="highlighter-rouge">write(2)</code>.</li>
  <li>
<code class="highlighter-rouge">ctim</code> is the last change time, or in other words, the last time the file’s metadata was changed.</li>
  <li>
<code class="highlighter-rouge"><a href="https://linux.die.net/man/1/size" class="fancy-link">size</a></code> is the size of the file in bytes</li>
  <li>
<code class="highlighter-rouge">direct</code> is an array where the <code class="highlighter-rouge">direct[i]</code> is the <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/i" class="fancy-link">i</a></code>th data block’s offset from the <code class="highlighter-rouge">data_root</code>.</li>
  <li>
<code class="highlighter-rouge">indirect</code> is the offset number (<code class="highlighter-rouge">data_block_number</code>) of a data block, which contains <code class="highlighter-rouge">NUM_INDIRECT_BLOCKS</code> number of <code class="highlighter-rouge">data_block_number</code>’s.</li>
</ul>
<h3 id="data-blocks" class="title-text">Data blocks</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>typedef struct {
	char data[16 * KILOBYTE];
} data_block;

</code></pre></div></div>
<p>Data blocks are currently defined to be 16 kilobytes. Nothing fancy here.</p>
<h3 id="file_system-struct" class="title-text">file_system struct</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
typedef struct {
	superblock* meta;
	inode* inode_root;
	data_block* data_root;
} file_system;

</code></pre></div></div>
<p class="img-paragraph"><img src="../images/assignment-docs/mp/finding_filesystems/map.png" alt="Finding Map"></p>
<p>The <code class="highlighter-rouge">file_system</code> struct keeps track of the metadata, the root inode (where <code class="highlighter-rouge">fs-&gt;inode_root[0]</code> is the root <code class="highlighter-rouge">"/"</code> inode), and the root of the <code class="highlighter-rouge">data_block</code>s.</p>
<ul>
  <li>The <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/meta" class="fancy-link">meta</a></code> pointer points to the start of the file system, which includes the superblock.</li>
  <li>The <code class="highlighter-rouge">inode_root</code> points to the start of the inodes as in the picture.</li>
  <li>The <code class="highlighter-rouge">data_root</code> points to the start of the <code class="highlighter-rouge">data_blocks</code> as in the picture, right after the inodes.</li>
  <li>The <code class="highlighter-rouge">data_map</code> keeps track of which blocks are used and is placed at the end of the filesystem which makes it easy to resize the filesystem (although resizing is not supported by your implementation).</li>
</ul>
<p>The inodes and data blocks are laid sequentially out so you can treat them like an array. Think about how you could get a pointer to the nth <code class="highlighter-rouge">data_block</code>.</p>
</div></div></div>
</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="fakefs-interface" class="title-text">fakefs interface<a class="anchor title-text" href="#fakefs-interface">#</a>
</h2></div>









<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p>You do not to modify or read any of the code in <code class="highlighter-rouge">fakefs_src/</code>.</p>
<p>To make this MP possible, we’ve developed our own userspace filesystem interface which we’re calling fakefs. Normally, filesystems are a piece of code which you load into your kernel and must provide a few things. It needs a constructor, destructor, callbacks for all system calls involving files and file descriptors within your filesystem. However, writing kernel code is a bit more cumbersome than writing normal code since you need additional security checks among other things, and can even lead to instability in your operating system. To avoid this, there are various ways to implment a filesystem in userspace. The most common (and preferred) method is to use a library called FUSE (Filesystems in USErspace). FUSE allows you to implement your file operations in userspace, but still interacts with the kernel to provide it’s functionality. While this allows you to mount the filesystem and use it like any other filesystem, there are a few reasons why we chose not to use it for this MP. A major reason is that if a FUSE callback crashes while it is mounted, it renders the mounted partition unusable and in some cases, you won’t be able to even unmount the partition without rebooting the machine. To prevent making this MP annoying and tedious, we’ve made our own way of implementing filesystems in userspace by <code class="highlighter-rouge">hooking</code> filesystem operations.</p>
<p>If you take a look at <code class="highlighter-rouge">fakefs_src/fakefs.c</code> you’ll see that we’ve overridden most of <code class="highlighter-rouge">glibc</code>’s filesystem operations. Note that this only hooks functions from code or programs that were either written in <code class="highlighter-rouge">C</code> or in something that compiles to <code class="highlighter-rouge">C</code>. Running a program written in assembly will not be affected by these hooks.</p>
<p>Note that not all programs will work with fakefs. At the least, we guarantee that <code class="highlighter-rouge"><a href="https://linux.die.net/man/1/ls" class="fancy-link">ls</a></code>, <code class="highlighter-rouge"><a href="https://linux.die.net/man/1/cat" class="fancy-link">cat</a></code>, <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/mkdir" class="fancy-link">mkdir</a></code>, <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/unlink" class="fancy-link">unlink</a></code> and <code class="highlighter-rouge"><a href="https://linux.die.net/man/1/cp" class="fancy-link">cp</a></code> work. <code class="highlighter-rouge"><a href="https://linux.die.net/man/1/vim" class="fancy-link">vim</a></code> and <code class="highlighter-rouge">neovim</code> seem to work although you might run into some weird bugs using these programs within fakefs.</p>
</div></div></div>
</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="helper-functionsmacros" class="title-text">Helper Functions/Macros<a class="anchor title-text" href="#helper-functionsmacros">#</a>
</h2></div>































<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p>There are some functions that you are going to need to know in order to finish this MP.</p>
<h3 id="get_inode" class="title-text"><code class="highlighter-rouge">get_inode</code></h3>
<p>This function takes a string name like <code class="highlighter-rouge">/path/to/file</code> and returns the inode corresponding to the file at the end of that path. <code class="highlighter-rouge">get_inode</code> returns NULL when the intended file does not exist or the file is invalid.</p>
<h3 id="is_file--is_directory" class="title-text">
<code class="highlighter-rouge">is_file</code> / <code class="highlighter-rouge">is_directory</code>
</h3>
<p>Call <code class="highlighter-rouge">is_file</code> or <code class="highlighter-rouge">is_directory</code> on an inode to tell whether it is a directory or a file. You don’t need to consider other inode types.</p>
<h3 id="is_virtual_path" class="title-text"><code class="highlighter-rouge">is_virtual_path</code></h3>
<p>Call <code class="highlighter-rouge">is_virtual_path</code> on a path to see if it’s a path in the virtual component. If it is, this function will return a path relative to the virtual directory. Returns <code class="highlighter-rouge">NULL</code> otherwise.</p>
<h3 id="minixfs_min_blockcount" class="title-text"><code class="highlighter-rouge">minixfs_min_blockcount</code></h3>
<p>Call <code class="highlighter-rouge">minixfs_min_blockcount</code> to ensure that an inode has a certain minimum number of data blocks directly, or indirectly associated with it.</p>
<h3 id="num_direct_blocks" class="title-text"><code class="highlighter-rouge">NUM_DIRECT_BLOCKS</code></h3>
<p><code class="highlighter-rouge">NUM_DIRECT_BLOCKS</code> is the number of direct <code class="highlighter-rouge">data_block</code> nodes in a single inode. The <code class="highlighter-rouge">indirect</code> array has only this many entries (for the sake of simplicity).</p>
<h3 id="unassigned_node" class="title-text"><code class="highlighter-rouge">UNASSIGNED_NODE</code></h3>
<p>You may not need to use this macro, but if you choose to, then any <code class="highlighter-rouge">data_block</code> or <code class="highlighter-rouge">inode</code> that is not currently being used will have this number.</p>
<h3 id="other-useful-functions" class="title-text">Other useful functions</h3>
<p>It’s also a good idea to read through <code class="highlighter-rouge">minixfs.h</code> and `minixfs_utils.h to get an idea of what tools we provide you with.</p>
</div></div></div>
</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="so-what-do-i-need-to-do" class="title-text">So what do I need to do?<a class="anchor title-text" href="#so-what-do-i-need-to-do">#</a>
</h2></div>











<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p>You will need to implement the following 4 functions</p>
<ul>
  <li><code class="highlighter-rouge">int minixfs_chmod(file_system *fs, char *path, int new_permissions)</code></li>
  <li><code class="highlighter-rouge">int minixfs_chown(file_system *fs, char *path, uid_t owner, gid_t group)</code></li>
  <li><code class="highlighter-rouge">inode *minixfs_create_inode_for_path(file_system *fs, const char *path)</code></li>
  <li><code class="highlighter-rouge">ssize_t minixfs_read(file_system *fs, const char *path, void *buf, size_t req, off_t *off)</code></li>
  <li><code class="highlighter-rouge">ssize_t minixfs_write(file_system *fs, const char *path, const void *buf, size_t count, off_t *off)</code></li>
</ul>
<p>And you will need to implement a virtual file <code class="highlighter-rouge">/virtual/info</code>. For more information about that scroll down to the virtual filesystem section.</p>
<p>You can find more information about the required functions in <code class="highlighter-rouge">minixfs.h</code>. Remember to set <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/errno" class="fancy-link">errno</a></code> on errors in your code!! We will be checking errno while grading.</p>
<p>Note that for all functions where you need to update times, you should use <code class="highlighter-rouge">clock_gettime(CLOCK_REALTIME, variable_to_update);</code>.</p>
</div></div></div>
</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="some-notes-on-minixfs_create_inode_for_path" class="title-text">Some notes on <code class="highlighter-rouge">minixfs_create_inode_for_path</code><a class="anchor title-text" href="#some-notes-on-minixfs_create_inode_for_path">#</a>
</h2></div>











<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p>Since we’ve had many students ask about this function, this section will
contain some hints.</p>
<p>Note that the parent directory of a path passed in will always exist when we
test your code.</p>
<p>When you find an unused inode, you will need to use <code class="highlighter-rouge">init_inode</code> to initialize
it.</p>
<p>Writing the string generated by <code class="highlighter-rouge">make_string_from_dirent</code> should follow the same
logic as writing any buffer to disk. (Hint: Maybe <code class="highlighter-rouge">minixfs_write</code> can be used for
this. Be careful to not cause an infinite loop in doing so, since in some cases,
<code class="highlighter-rouge">minixfs_write</code> may want to create an inode first.)</p>
<p>The number of bytes written by calling <code class="highlighter-rouge">make_string_from_dirent</code> will be equal to
<code class="highlighter-rouge">FILE_NAME_ENTRY</code> as defined in <code class="highlighter-rouge">minixfs.h</code></p>
</div></div></div>
</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="virtual-filesystem" class="title-text">Virtual Filesystem<a class="anchor title-text" href="#virtual-filesystem">#</a>
</h2></div>











<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p>In order to quickly get meta-information about the filesystem, we’re going to implement a virtual filesystem. Virtual filesystems are filesystems that present file-like objects, but don’t provide access to data in the traditional sense that you would expect from a filesystem. Some examples are <code class="highlighter-rouge">procfs</code> (usually mounted at <code class="highlighter-rouge">/proc</code>) that gives a user information about running processes, and also has some special files that can control various system parameters or provide debugging information about a running machine, or <code class="highlighter-rouge">devfs</code> (usually mounted at <code class="highlighter-rouge">/dev</code>) that provides information about devices and presents some virtual devices such as ‘<code class="highlighter-rouge">dev/zero</code>, <code class="highlighter-rouge">/dev/random</code> and /dev/null` which have special actions when being read or written to.</p>
<p>The virtual filesystem we will be baking into our mininxfs implementation will live at <code class="highlighter-rouge">/virtual</code> with respect to the root of your minix filesystem. There will be at least one file inside, <code class="highlighter-rouge"><a href="https://linux.die.net/man/1/info" class="fancy-link">info</a></code>. You do not need to implement writing to <code class="highlighter-rouge">/virtual/info</code>, but do need to support read. When read from, <code class="highlighter-rouge">/virtual/info</code> will return a string with the following format:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Free blocks: [number of free blocks]
Used blocks: [number of used blocks]
</code></pre></div></div>
<p>Note that there is a new line at the end of each line above. You will need to compute the number of free and used blocks to insert into the data. Also note that you will need to support reading the virtual file from an offset, and must not copy more bytes to the user’s buffer than requested (just like a normal read).</p>
<p>To simplify your implementation we recommend first generating the data above as a string and then copying a certain number of bytes of the string from a desired offset to the user buffer.</p>
</div></div></div>
</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="testing" class="title-text">Testing<a class="anchor title-text" href="#testing">#</a>
</h2></div>































<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p><strong>Testing is ungraded, but highly recommended</strong></p>
<p>You can grab the test filesystem using <code class="highlighter-rouge">make testfs</code>. <strong>Do not commit this file. If you overwrite it and want the original version just <code class="highlighter-rouge">rm test.fs</code> and do <code class="highlighter-rouge">make testfs</code> again</strong></p>
<p>You will probably want to reset your <code class="highlighter-rouge">test.fs</code> file frequently while testing your write functionality.</p>
<p>Note: There’s a small chance that <code class="highlighter-rouge">make testfs</code> can fail - in this case <code class="highlighter-rouge">rm test.fs</code> and <code class="highlighter-rouge">make testfs</code> again.</p>
<p>make will generate the minixfs_test executable that you can use for testing. We strongly recommend writing your own testcases in <code class="highlighter-rouge">minixfs_test.c</code> and not just on the output of commands like <code class="highlighter-rouge"><a href="https://linux.die.net/man/1/ls" class="fancy-link">ls</a></code> and <code class="highlighter-rouge"><a href="https://linux.die.net/man/1/cat" class="fancy-link">cat</a></code> (which we describe how to test with below). This is because subtle bugs in your code can make the output look right, but have random unprintable characters as well.</p>
<p>The <code class="highlighter-rouge">goodies</code> directory is also included and can also be used to check against the /goodies directory in test.fs.
For example, the output of:
<code class="highlighter-rouge">./fakefs test.fs cat test.fs/goodies/hello.txt</code> should be the same as <code class="highlighter-rouge">cat ./goodies/hello.txt</code></p>
<p>Here are some sample (and not comprehensive) testcases!</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./fakefs test.fs cat test.fs/goodies/hello.txt
Hello World!
$
</code></pre></div></div>
<p>You can even cat directories!</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./fakefs test.fs cat test.fs/
you00000001got00000002ls!00000003congrats00000004 [...]
$
</code></pre></div></div>
<p>So that’s what really is going on under the hood?</p>
<p>Want something fun?</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
$ ./fakefs test.fs cat test.fs/goodies/dog.png &gt; dog.png
$ xdg-open dog.png

</code></pre></div></div>
<p>You can store anything on filesystems. See what we hid around the testfs filesystem for you…</p>
<p>You can also test by generating your own filesystems. Simply run ./fakefs mkfs <em>filename</em> to generate a filesystem with the filename <em>filename</em>. If you’ve implemented the write functionality, you can use commands like ./fakefs cp <em>file1</em> <em>filename</em>/ to copy files over. programs like <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/mkdir" class="fancy-link">mkdir</a></code> should work as well.</p>
</div></div></div>
</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="other-edge-cases" class="title-text">Other Edge Cases<a class="anchor title-text" href="#other-edge-cases">#</a>
</h2></div>



<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1"><ul>
  <li>You do need to update <code class="highlighter-rouge">atim</code> and the <code class="highlighter-rouge">ctim</code>!</li>
  <li>You don’t need to about data corruption or checksums or anything fancy, the filesystem will be valid. (Unless your write has bugs in it)</li>
  <li>Make sure all the files you cat out in <code class="highlighter-rouge">/goodies</code> look correct when you <code class="highlighter-rouge"><a href="https://linux.die.net/man/1/xdg-open" class="fancy-link">xdg-open</a></code> them. Make sure you can get the PNGs and the PDFs to print out correctly.</li>
  <li>Make sure your output is the same size as the files inside the filesystem. You can check this by running stat on the files inside the filesystem(<code class="highlighter-rouge">./fakefs test.fs stat test.fs/FILE_PATH</code>), and wc -c on the on output of running cat on the file (<code class="highlighter-rouge">./fakefs test.fs cat test.fs/FILE_PATH | wc -c</code>) to check that the number of bytes is the same.</li>
</ul></div></div></div>
</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="helpful-hints-and-notes" class="title-text">Helpful Hints and Notes<a class="anchor title-text" href="#helpful-hints-and-notes">#</a>
</h2></div>


<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1"><ul>
  <li>We’ve gone ahead and compiled some info on tools you may find useful in this MP: <a href="../tutorials/filesystems_tools.html" class="fancy-link wiki-link">Finding Filesystem Tools</a>
</li>
  <li>Handle the edge conditions. You can assume that size will be valid. What is the code supposed to do when you get to a singly indirect block?</li>
  <li>Draw pictures! Understand what each of the things in the structs mean.</li>
  <li>Review your pointer arithmetic.</li>
  <li>
<strong>Only</strong> change<code class="highlighter-rouge">minixfs.c</code>.</li>
</ul></div></div></div>
</div></div>
</div>
          
          <div class="wrapper">
</div>
      </div>
      <div class="col-md-2 col-sm-1 col-xs-0"></div>
    </div>
  </div>
  <script>
    var github_repo = "illinois-cs241/illinois-cs241.github.io";
    var github_path = "_docs/finding_filesystems.md";
  </script>
  <!-- Mathjax takes a while to load so do a lazy load to so we can get accessibility -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" crossorigin="anonymous"></script>

<!-- Bring in JQuery and Bootstrap -->
<script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js" crossorigin="anonymous"></script>

<footer class="">

<!-- Add another container at the bottom so there is some space there -->
<div class="container-fluid">
<div class="shadow"></div>

</div>

</footer>

</body>

<!-- Mirrored from cs241.cs.illinois.edu/assignments/finding_filesystems.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 17 Dec 2019 18:32:40 GMT -->
</html>
